# ğŸ™ à¤¶à¥à¤°à¥€ à¤°à¤¾à¤® à¤¶à¤°à¤£à¤®à¥ - à¤¸à¤¾à¤§à¤¨à¤¾ à¤¸à¤¤à¥à¤¸à¤‚à¤— à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨ à¤ªà¥à¤°à¤£à¤¾à¤²à¥€

à¤¸à¤¾à¤§à¤¨à¤¾ à¤¸à¤¤à¥à¤¸à¤‚à¤— à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¤¾à¤§à¤•à¥‹à¤‚ à¤•à¤¾ à¤¡à¤¿à¤œà¤¿à¤Ÿà¤² à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨ à¤ªà¥à¤°à¤£à¤¾à¤²à¥€à¥¤ à¤¯à¤¹ à¤µà¥‡à¤¬ à¤à¤ªà¥à¤²à¤¿à¤•à¥‡à¤¶à¤¨ à¤¸à¤¾à¤§à¤•à¥‹à¤‚ à¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€, à¤¸à¥à¤¥à¤¾à¤¨ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨, à¤¸à¤¤à¥à¤¸à¤‚à¤— à¤•à¤¾à¤°à¥à¤¯à¤•à¥à¤°à¤® à¤”à¤° à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤œà¤¨à¤°à¥‡à¤¶à¤¨ à¤•à¥‡ à¤²à¤¿à¤ à¤¬à¤¨à¤¾à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤

## âœ¨ Features

- ğŸ” **Authentication** - Secure login system with session management
- ğŸ‘¥ **à¤¸à¤¾à¤§à¤• à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨** - à¤¸à¤¾à¤§à¤•à¥‹à¤‚ à¤•à¥€ à¤ªà¥‚à¤°à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤”à¤° à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡
- âœ… **Approval System** - à¤¸à¤¾à¤§à¤•à¥‹à¤‚ à¤•à¥€ à¤¸à¥à¤µà¥€à¤•à¥ƒà¤¤à¤¿ à¤ªà¥à¤°à¤£à¤¾à¤²à¥€
- ğŸ“ **à¤¸à¥à¤¥à¤¾à¤¨ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨** - à¤µà¤¿à¤­à¤¿à¤¨à¥à¤¨ à¤¸à¥à¤¥à¤¾à¤¨à¥‹à¤‚ à¤•à¤¾ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨
- ğŸ“… **à¤¸à¤¤à¥à¤¸à¤‚à¤— à¤•à¤¾à¤°à¥à¤¯à¤•à¥à¤°à¤®** - à¤†à¤—à¤¾à¤®à¥€ à¤¸à¤¤à¥à¤¸à¤‚à¤— à¤•à¥€ à¤¯à¥‹à¤œà¤¨à¤¾ à¤”à¤° à¤ªà¤‚à¤œà¥€à¤•à¤°à¤£
- ğŸ“Š **à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤œà¤¨à¤°à¥‡à¤¶à¤¨** - PDF à¤”à¤° Excel à¤®à¥‡à¤‚ à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡
- ğŸ” **à¤–à¥‹à¤œ à¤”à¤° à¤«à¤¼à¤¿à¤²à¥à¤Ÿà¤°** - à¤†à¤¸à¤¾à¤¨ à¤–à¥‹à¤œ à¤¸à¥à¤µà¤¿à¤§à¤¾
- ğŸ“± **Responsive Design** - à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤”à¤° à¤¡à¥‡à¤¸à¥à¤•à¤Ÿà¥‰à¤ª à¤¦à¥‹à¤¨à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤

## ğŸ› ï¸ Tech Stack

- **Frontend**: Next.js 14 (App Router), React, TypeScript, Tailwind CSS
- **Backend**: Next.js API Routes
- **Database**: PostgreSQL
- **ORM**: Drizzle ORM
- **Validation**: Zod
- **Forms**: React Hook Form
- **UI Components**: Lucide Icons, Sonner (Toast)
- **PDF Generation**: Puppeteer (Server-side)
- **Reports**: jsPDF, xlsx
- **Containerization**: Docker, Docker Compose

## ğŸ“‹ Prerequisites

- Node.js 18+ 
- Docker & Docker Compose
- Git

## ğŸš€ Quick Start

### Option 1: Using Docker (Recommended)

```bash
# Clone repository
git clone https://github.com/fmspathankot-spec/sadhana-satsang-portal.git
cd sadhana-satsang-portal

# Copy environment file
cp .env.example .env

# Edit .env and set your credentials
# AUTH_USERNAME="your_username"
# AUTH_PASSWORD="your_password"

# Start with Docker Compose
docker-compose up -d

# Run migrations
docker-compose exec app npm run db:push

# Access application
# http://localhost:3000
```

### Option 2: Local Development

```bash
# Clone repository
git clone https://github.com/fmspathankot-spec/sadhana-satsang-portal.git
cd sadhana-satsang-portal

# Install dependencies
npm install

# Setup environment variables
cp .env.example .env
# Edit .env with your database credentials and auth credentials

# Run PostgreSQL (if not using Docker)
# Make sure PostgreSQL is running on localhost:5432

# Generate database schema
npm run db:generate

# Push schema to database
npm run db:push

# Start development server
npm run dev

# Access application
# http://localhost:3000
```

## ğŸ” Authentication

The portal uses session-based authentication to protect all routes.

### Default Credentials

**âš ï¸ IMPORTANT: Change these credentials in production!**

```
Username: srspkt
Password: srs@#pkt1313
```

### Changing Credentials

Edit your `.env` file:

```env
AUTH_USERNAME="your_username"
AUTH_PASSWORD="your_secure_password"
```

### Features

- âœ… Session-based authentication (7-day expiry)
- âœ… Protected routes via middleware
- âœ… Auto-redirect to login for unauthenticated users
- âœ… Logout functionality
- âœ… Secure cookies (HttpOnly, Secure in production)

## ğŸ“ Project Structure

```
sadhana-satsang-portal/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ api/                  # API Routes
â”‚   â”‚   â”œâ”€â”€ auth/            # Authentication endpoints
â”‚   â”‚   â”œâ”€â”€ places/          # Places endpoints
â”‚   â”‚   â”œâ”€â”€ sadhaks/         # Sadhaks endpoints
â”‚   â”‚   â”œâ”€â”€ events/          # Events endpoints
â”‚   â”‚   â”œâ”€â”€ export/          # PDF export endpoints
â”‚   â”‚   â””â”€â”€ reports/         # Reports endpoints
â”‚   â”œâ”€â”€ login/               # Login page
â”‚   â”œâ”€â”€ approved-list/       # Approved sadhaks list
â”‚   â”œâ”€â”€ places/              # Places pages
â”‚   â”œâ”€â”€ sadhaks/             # Sadhaks pages
â”‚   â”œâ”€â”€ events/              # Events pages
â”‚   â”œâ”€â”€ reports/             # Reports pages
â”‚   â”œâ”€â”€ layout.tsx           # Root layout
â”‚   â””â”€â”€ page.tsx             # Dashboard
â”œâ”€â”€ components/              # React components
â”‚   â”œâ”€â”€ layout/             # Layout components (Sidebar, etc.)
â”‚   â”œâ”€â”€ forms/              # Form components
â”‚   â”œâ”€â”€ tables/             # Table components
â”‚   â””â”€â”€ dashboard/          # Dashboard components
â”œâ”€â”€ db/                      # Database
â”‚   â”œâ”€â”€ schema.ts           # Drizzle schema
â”‚   â”œâ”€â”€ index.ts            # DB connection
â”‚   â””â”€â”€ migrations/         # Migration files
â”œâ”€â”€ lib/                     # Utilities
â”‚   â”œâ”€â”€ validations/        # Zod schemas
â”‚   â””â”€â”€ utils.ts            # Helper functions
â”œâ”€â”€ public/                  # Static files
â”œâ”€â”€ docs/                    # Documentation
â”œâ”€â”€ middleware.ts           # Auth middleware
â”œâ”€â”€ .env.example            # Environment template
â”œâ”€â”€ docker-compose.yml      # Docker Compose config
â”œâ”€â”€ Dockerfile              # Docker image config
â”œâ”€â”€ drizzle.config.ts       # Drizzle configuration
â”œâ”€â”€ package.json            # Dependencies
â””â”€â”€ README.md               # This file
```

## ğŸ—„ï¸ Database Schema

### Tables

1. **places** - à¤¸à¥à¤¥à¤¾à¤¨à¥‹à¤‚ à¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€
2. **sadhaks** - à¤¸à¤¾à¤§à¤•à¥‹à¤‚ à¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ (with approval status)
3. **satsang_events** - à¤¸à¤¤à¥à¤¸à¤‚à¤— à¤•à¤¾à¤°à¥à¤¯à¤•à¥à¤°à¤®
4. **registrations** - à¤¸à¤¾à¤§à¤•à¥‹à¤‚ à¤•à¤¾ à¤ªà¤‚à¤œà¥€à¤•à¤°à¤£

### Relationships

- One Place â†’ Many Sadhaks
- One Sadhak â†’ Many Registrations
- One Event â†’ Many Registrations

## ğŸ”§ Environment Variables

```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/satsang_db"

# App
NODE_ENV="development"
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Authentication
AUTH_USERNAME="srspkt"
AUTH_PASSWORD="srs@#pkt1313"

# PgAdmin (Optional)
PGADMIN_DEFAULT_EMAIL="admin@satsang.com"
PGADMIN_DEFAULT_PASSWORD="admin123"
```

## ğŸ“ Available Scripts

```bash
# Development
npm run dev              # Start dev server

# Database
npm run db:generate      # Generate migrations
npm run db:push          # Push schema to DB
npm run db:studio        # Open Drizzle Studio

# Production
npm run build            # Build for production
npm run start            # Start production server

# Docker
docker-compose up -d     # Start all services
docker-compose down      # Stop all services
docker-compose logs -f   # View logs
```

## ğŸ³ Docker Services

- **app** - Next.js application (Port 3000)
- **postgres** - PostgreSQL database (Port 5432)
- **pgadmin** - Database GUI (Port 5050)

## ğŸ“Š API Endpoints

### Authentication
- `POST /api/auth/login` - Login
- `POST /api/auth/logout` - Logout
- `GET /api/auth/check` - Check auth status

### Sadhaks
- `GET /api/sadhaks` - Get all sadhaks
- `POST /api/sadhaks` - Create new sadhak
- `GET /api/sadhaks/:id` - Get sadhak by ID
- `PATCH /api/sadhaks/:id` - Update sadhak
- `DELETE /api/sadhaks/:id` - Delete sadhak

### Places
- `GET /api/places` - Get all places
- `POST /api/places` - Create new place
- `GET /api/places/:id` - Get place by ID
- `PATCH /api/places/:id` - Update place
- `DELETE /api/places/:id` - Delete place

### Events
- `GET /api/events` - Get all events
- `POST /api/events` - Create new event
- `GET /api/events/:id` - Get event by ID
- `PATCH /api/events/:id` - Update event
- `DELETE /api/events/:id` - Delete event

### Export
- `GET /api/export/approved-pdf` - Generate approved list PDF

### Reports
- `GET /api/reports` - Generate report data

## ğŸ¨ UI Components

- **Login Page** - Secure authentication
- **Dashboard** - Overview with stats
- **Sadhaks List** - Searchable table with filters and approval
- **Approved List** - Gender-separated approved sadhaks
- **Sadhak Form** - Add/Edit sadhak
- **Places Grid** - Card-based place view
- **Reports** - PDF/Excel generation

## ğŸ” Security

- Session-based authentication
- Protected routes via middleware
- Input validation with Zod
- SQL injection prevention with Drizzle ORM
- Environment variables for sensitive data
- Secure cookies (HttpOnly, Secure)
- CORS configuration

## ğŸ“„ PDF Generation

The portal uses **Puppeteer** for server-side PDF generation with:
- âœ… Perfect Hindi font rendering (Noto Sans Devanagari)
- âœ… Proper Unicode support
- âœ… Gender-separated lists (Ladies & Gents)
- âœ… Professional formatting
- âœ… Separate pages for each gender section

## ğŸš€ Deployment

### Vercel (Recommended)

```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel

# Add environment variables in Vercel dashboard:
# - DATABASE_URL
# - AUTH_USERNAME
# - AUTH_PASSWORD
# - NODE_ENV=production
```

### Docker Production

```bash
# Build production image
docker build -t sadhana-satsang-portal .

# Run container
docker run -p 3000:3000 --env-file .env sadhana-satsang-portal
```

## ğŸ“– Documentation

- [Installation Guide](./docs/INSTALLATION.md)
- [User Guide](./docs/USER_GUIDE.md)
- [API Documentation](./docs/API.md)
- [Database Schema](./docs/DATABASE.md)
- [Docker Guide](./docs/DOCKER.md)

## ğŸ¤ Contributing

Contributions are welcome! Please read [CONTRIBUTING.md](./CONTRIBUTING.md) first.

## ğŸ“ Contact

**à¤¶à¥à¤°à¥€ à¤°à¤¾à¤® à¤¶à¤°à¤£à¤®à¥ à¤ªà¤ à¤¾à¤¨à¤•à¥‹à¤Ÿ**
- ğŸ“ Phone: 0186-2224242
- ğŸ“± Mobile: 9872035936

## ğŸ“œ License

This project is licensed under the MIT License.

---

**à¤¶à¥à¤°à¥€ à¤°à¤¾à¤® à¤œà¤¯ à¤°à¤¾à¤® à¤œà¤¯ à¤œà¤¯ à¤°à¤¾à¤®** ğŸ™